<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0">
    <title>Mapbox Surface Type Debug</title>
    <script>
        // Function to fetch surface types from Mapbox
        function fetchSurfaceTypes() {
            // Define the coordinates for the route
            const coordinatesArray = [
                [23.785895, 38.050466],
                [23.785785, 38.050530],
                [23.785675, 38.050595]
            ];

            // Convert coordinates array to Mapbox's expected format: "lon,lat;lon,lat;..."
            const coordinatesString = coordinatesArray.map(coord => coord.join(',')).join(';');

            // Construct the URL for the API request
            const url = `https://api.mapbox.com/directions/v5/mapbox/cycling/${coordinatesString}?geometries=geojson&annotations=surface&tidy=true&access_token=pk.eyJ1IjoidGFza2FsbCIsImEiOiJjbTI0amdhNGkwZGtkMm1xd3BudHJ0dmN0In0.yK-2hu2fVVC6NwmdAXaAwQ`;

            console.log("Request URL:", url); // Log the URL for debugging

            // Fetch surface data
            fetch(url)
                .then(response => {
                    console.log("Response Status:", response.status); // Log the status code
                    if (!response.ok) {
                        return response.text().then(text => { // Read the response as text
                            throw new Error(`Network response was not ok: ${response.status} - ${text}`);
                        });
                    }
                    return response.json();
                })
                .then(data => {
                    // Check if the route and surface data is present
                    if (data.routes && data.routes.length > 0) {
                        const surfaceTypes = data.routes[0].legs[0].annotation.surface;
                        console.log('Surface Types:', surfaceTypes);

                        // Display surface types in the alert
                        alert('Surface Types:\n' + surfaceTypes.join('\n'));
                    } else {
                        console.warn('No routes found in response');
                        alert('No routes found in response');
                    }
                })
                .catch(error => {
                    console.error('Error fetching surface data:', error);
                    alert('Error fetching surface data: ' + error.message);
                });
        }

        // Execute the function when the page loads
        window.onload = fetchSurfaceTypes;
    </script>
</head>
<body>
    <h1>Mapbox Surface Type Debug By TK</h1>
    <p>Open the console to view surface type data.</p>
</body>
</html>
